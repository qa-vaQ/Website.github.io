<!DOCTYPE html>
<html>
<head>
	<style>
		body {
			background: linear-gradient(-45deg, #23d5ab, #32CD32, #23a6d5, #800080);
			background-size: 400% 400%;
			animation: gradient 15s ease infinite;
		}
		p20 {
			opacity:0;
		}
		@keyframes gradient {
			0% {
		  		background-position: 0% 50%;
			}
			50% {
				background-position: 100% 50%;
			}
			100% {
				background-position: 0% 50%;
			}
		}
		div.foreground {
			position: absolute;
			left: 20%;
			right: 20%;
			background-color: white;
			border: 3px solid #000000;
			padding: 10px; 
			min-height: 100%;
			border-bottom-style: hidden;
			border-top-style: hidden;
			
		}
		.container{
  		$font-family-sans-serif:
  		// Cross-platform generic font family (default user interface font)
  		system-ui,
  		// Safari for macOS and iOS (San Francisco)
  		-apple-system,
  		// Chrome < 56 for macOS (San Francisco)
  		BlinkMacSystemFont,
  		// Windows
  		"Segoe UI",
  		// Android
  		Roboto,
  		// Basic web fallback
  		"Helvetica Neue", Arial,
  		// Linux
  		"Noto Sans",
  		"Liberation Sans",
  		// Sans serif fallback
  		sans-serif,
  		// Emoji fonts
  		"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !default;
		}
		alert{
  			margin: auto;
		}
		.box {  
    			display: flex;
    		}
    		.one {
    			flex: 1 1 auto;
    		}
    		.two {
    			flex: 1 1 auto;
    		}
    		.three {
    			flex: 1 1 auto;
    		}
		th{
  			word-wrap:break-word
		}
		td{
  			word-wrap:break-word
		}
	</style>
	<script>

	var numbers = [
	    [],
	    [],
	    [],
	    [],
	    [],
	    []
	];
	var n = 0



	function myCreateFunction() {
	    var message = "";

	    var reg = document.getElementById("reg").value;
	    var regRGEX = /^[A-Z]{2}[0-9]{2}[A-Z]{2}[0-9]{4}$/;
	    var regResult = regRGEX.test(reg);
	    var milesR = document.getElementById("milesR").value;
	    var milesN = document.getElementById("milesN").value;
	    var leaveTime = document.getElementById("leaveTime").value;
	    var arriveTime = document.getElementById("arriveTime").value;
	    var timeDif = leaveTime - arriveTime
	    var buffer = (milesN / 100) * 110
	    var roundedBuffer = buffer.toFixed(1);
	    var milesDif = roundedBuffer - milesR
	    var unroundedHours = milesDif / 44;
	    var hoursN = unroundedHours.toFixed(1);
	    // validation
	    if (n >= 6) {
		message = message + "Too many cars. ";
	    }
	    if (regResult == false) {

	    }
	    if (milesR == "") {
		message = message + "Fill in the Miles Range. ";
	    }
	    if (milesN == "") {
		message = message + "Fill in the Miles Needed. ";
	    }
	    if (buffer <= milesR){
	      message = message + "This car doesn't need to be charged."
	    }
	    if (timeDif <= 0) {
		message = message + "You need to leave after you arrive. ";
	    }
	    if (message != "") {
	      document.getElementById("myAlert").style.display = "block";
	      document.getElementById("myAlertLabel").innerHTML = message;
	    }
	    // end of validation

	    if (n < 6  && milesR != "" && milesN != "" && timeDif > 0 && buffer > milesR) {

		var table = document.getElementById("table");
		closeAlert()
		var row = table.insertRow(-1);
		var td1 = row.insertCell(0);
		var td2 = row.insertCell(1);
		var td3 = row.insertCell(2);
		var td4 = row.insertCell(3);
		var td5 = row.insertCell(4);
		var td6 = row.insertCell(5);
		td1.innerHTML = reg;
		td2.innerHTML = milesR;
		td3.innerHTML = milesN;
		td4.innerHTML = leaveTime;
		td5.innerHTML = milesDif;
		td6.innerHTML = "<button type='button' onClick='myDeleteFunction(this);' class='btn btn-close' aria-label='Close'></button>";
		td6.style = "text-align:center"
		numbers[n].push(reg)
		numbers[n].push(hoursN)
		numbers[n].push(arriveTime)
		numbers[n].push(leaveTime)
		n = n + 1
		document.getElementById("reg").value = ""
		document.getElementById("milesR").value = ""
		document.getElementById("milesN").value = ""

		var chargeTable = document.getElementById("chargeTimeTable");
		var chargeRow = chargeTable.insertRow(-1);
		var regNo0 = chargeRow.insertCell(0);
		var regNo1 = chargeRow.insertCell(1);
		var regNo2 = chargeRow.insertCell(2);
		var regNo3 = chargeRow.insertCell(3);
		var regNo4 = chargeRow.insertCell(4);
		var regNo5 = chargeRow.insertCell(5);
		var regNo6 = chargeRow.insertCell(6);
		var regNo7 = chargeRow.insertCell(7);
		var regNo8 = chargeRow.insertCell(8);
		var regNo9 = chargeRow.insertCell(9);
		var regNo10 = chargeRow.insertCell(10);
		var chargeCells = [regNo1,regNo2,regNo3,regNo4,regNo5,regNo6,regNo7,regNo8,regNo9,regNo10];
		regNo0.innerHTML = reg;
		chargeCells[arriveTime-7].style.backgroundColor = "grey";
		var tempTimeDif = timeDif;
		var tempArriveTime = arriveTime-7;
		while (tempTimeDif > 1) {
		  tempArriveTime += 1;
		  chargeCells[tempArriveTime].style.backgroundColor = "grey";
		  tempTimeDif += -1;
		}
	    }

	}

	function closeAlert() {
		document.getElementById("myAlert").style.display = "none";
	      }
	function myDeleteFunction(x) {
	  var clearRow = x.parentNode.parentNode.rowIndex
	  document.getElementById("table").deleteRow(clearRow)
	  document.getElementById("chargeTimeTable").deleteRow(clearRow)
	  numbers[clearRow].shift()
	  numbers[clearRow].shift()
	  numbers[clearRow].shift()
	  n = n - 1
	  }

	function calculate() {
	  var times = [
	    [7, 40],
	    [8, 50],
	    [9, 60],
	    [10, 70],
	    [11, 80],
	    [12, 70],
	    [13, 70],
	    [14, 60],
	    [15, 50],
	    [16, 40]
	]
	  var reg = [numbers[0][0],numbers[1][0],numbers[2][0],numbers[3][0],numbers[4][0],numbers[5][0]];
	  var hoursN = [numbers[0][1],numbers[1][1],numbers[2][1],numbers[3][1],numbers[4][1],numbers[5][1]];
	  var arriveTime = [numbers[0][2],numbers[1][2],numbers[2][2],numbers[3][2],numbers[4][2],numbers[5][2]];
	  var leaveTime = [numbers[0][3],numbers[1][3],numbers[2][3],numbers[3][3],numbers[4][3],numbers[5][3]];
	  var hoursDif = [[(leaveTime[0]-arriveTime[0])-hoursN[0],0],[(leaveTime[1]-arriveTime[1])-hoursN[1],1],[(leaveTime[2]-arriveTime[2])-hoursN[2],2],[(leaveTime[3]-arriveTime[3])-hoursN[3],3],[(leaveTime[4]-arriveTime[4])-hoursN[4],4],[(leaveTime[5]-arriveTime[5])-hoursN[5],5]];
	  hoursDif.sort()
	  var time = 0;
	  var x = 0;
	  var y = 0;
	  var temp = []
	  while (time == 0) {
	    if (arriveTime[x]-7 == time) {
	      temp.push(hoursDif[x][1]);
	    }
	    x += 1;
	    var maxCars = Math.floor(times[time][1]/11);
	    if (x > 6) {
	      if (temp.length <= maxCars) {
		x = 0
		while (x < maxCars) {
		  document.getElementById("chargeTimeTable").rows[hoursDif[x][1]+1].cells[time+1].style.backgroundColor = "green";
		  x += 1;
		}
	      }
	    else{
	      x = 0
	      while (x <= maxCars){
		while (y < temp.length){
		  if (temp[y] == hoursDif[0]){
		    var containCheck = True;
		  }
		  y += 1;
		}
		if (containCheck == true) {
		 document.getElementById("show").innerHTML = tempment.getElementById("chargeTimeTable").rows[hoursDif[x][1]+1].cells[time+1].style.backgroundColor = "green";
		}
		x += 1
	      }

	    }
	      time += 1;
	    }
	  }

	}
</script>
</head>
<body class="container-fluid" onload="closeAlert()">
	<div class="foreground">
		<center>
		<div class="row">
			<div class="col-sm">
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">  </script>
			<h1 class="display-1">Solar Charging Project</h1>
			<label id="show"></label>
			<br><lable> Reg Number </lable> <input type="text" id="reg" class="input-group" style="border-radius: 5px; border: 1px solid #808080"> <br>
			<lable> Miles Range </lable> <input type="text" id="milesR" class="input-group" style="border-radius: 5px; border: 1px solid #808080"> <br>
			<lable> Miles Needed </lable> <input type="text" id="milesN" class="input-group" style="border-radius: 5px; border: 1px solid #808080"> <br>

        <lable><p20>!</p20>Arrival Time<p20>!</p20></lable> <select id="arriveTime" class="btn btn-outline-secondary dropdown-toggle">
					<option value="7.00"> 7.00 </option>
					<option value="8.00"> 8.00 </option>
					<option value="9.00"> 9.00 </option>
					<option value="10.00"> 10.00 </option>
					<option value="11.00"> 11.00 </option>
					<option value="12.00"> 12.00 </option>
					<option value="13.00"> 13.00 </option>
					<option value="14.00"> 14.00 </option>
					<option value="15.00"> 15.00 </option>
					<option value="16.00"> 16.00 </option>
			</select><br>

			<lable> Leaving Time </lable> <select id="leaveTime" class="btn btn-outline-secondary dropdown-toggle">
					<option value="8.00"> 8.00 </option>
					<option value="9.00"> 9.00 </option>
					<option value="10.00"> 10.00 </option>
					<option value="11.00"> 11.00 </option>
					<option value="12.00"> 12.00 </option>
					<option value="13.00"> 13.00 </option>
					<option value="14.00"> 14.00 </option>
					<option value="15.00"> 15.00 </option>
					<option value="16.00"> 16.00 </option>
					<option value="17.00"> 17.00 </option>
			</select>

			<div class="box">
				<button onclick="myCreateFunction()" class="one btn btn-outline-secondary"><p20>!!</p20>Submit<p20>!</p20></button>
				<button onclick="calculate()" class="three btn btn-outline-secondary">Calculate</button>
			</div>

			<div class="alert alert-danger alert-dismissible col" role="alert" id="myAlert" >
				<button type="button" class="btn-close" onclick="closeAlert()" ></button>
				<label id="myAlertLabel"> </label>
			</div>

	<table id="table" class="table table-responsive table-bordered" style="table-layout: fixed ; width: 100%;">
			<tr>
					<th style = "text-align:center">Reg Number</th>
					<th style = "text-align:center">Miles Range</th>
					<th style = "text-align:center">Miles Needed</th>
					<th style = "text-align:center">Leave Time</th>
					<th style = "text-align:center">Miles Difference</th>
					<th style = "text-align:center">Clear</th>
			</tr>
	</table>
	<table class="table table-bordered table-responsive" id="chargeTimeTable" style="table-layout: fixed ; width: 100%;">
		<tr>
			<th style = "text-align:center">Reg</th>
			<th style = "text-align:center">7-8</th>
			<th style = "text-align:center">8-9</th>
			<th style = "text-align:center">9-10</th>
			<th style = "text-align:center">10-11</th>
			<th style = "text-align:center">11-12</th>
			<th style = "text-align:center">12-13</th>
			<th style = "text-align:center">13-14</th>
			<th style = "text-align:center">14-15</th>
			<th style = "text-align:center">15-16</th>
			<th style = "text-align:center">16-17</th>
		</tr>

	</table>
	</div>
	</div>
</center>
</div>
</body>
</html>
